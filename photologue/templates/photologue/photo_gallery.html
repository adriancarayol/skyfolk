{% extends 'account/base_interface.html' %}
{% load avatar_tags %}
{% load i18n %}
{% load humanize %}
{% block title %} <title>Galería de {{ user_gallery }}</title> {% endblock %}

{% block include_files %}
    <link rel="stylesheet" href="{{STATIC_URL}}css/gallery.css" onload="if(media!='all')media='all'"> <!-- Estilos para la galeria de fotos -->
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col l12 m12 s12 container-gallery">
              <a id="btn-upload-photo" class="btn-floating btn-large waves-effect waves-light blue darken-1"><i class="material-icons">add</i></a>
                {% if object_list %}
                    <div class="row">
                    {% for photo in object_list %}
                        <div class="col l2 m12 s12 image-div">
                            <div class="container-image">
                                <div class="principal-content">
                                    {% if photo.tags.all %}
                                        <div class="tags-content">
                                        {% for tag in photo.tags.all %}
                                            <blockquote>{{ tag.name }}</blockquote>
                                        {% endfor %}
                                        </div>
                                    {% endif %}
                                    <img src="{{ photo.image.url }}" alt="{{ photo.title }}" title="{{ photo.title }}" onclick="location.href='{{ photo.get_absolute_url }}'">
                                </div>
                                <div class="col s12 legend-content">
                                    <div class="legend-user-image">
                                        {% avatar photo.owner.username %}
                                    </div>
                                    <div class="col l8 m8 s8 legend-user-data">
                                        <a href="/profile/{{ photo.owner.username }}">@{{ photo.owner.username }}</a>
                                        <i class="photo-title truncate">{{ photo.title }}</i>
                                        <i class="truncate photo-date"><i class="fa fa-clock-o" aria-hidden="true"></i> {{ photo.date_added|naturaltime }}</i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                {% endif %}
            </div> <!-- end container-gallery -->
        </div>
    <div class="upload_form" id="upload_photo">
        <form action="" method="post" accept-charset="utf-8" enctype="multipart/form-data">{% csrf_token %}
            <div class="row">
                <div class="file-field input-field">
                    {{ form.image.errors }}
                  <div class="btn blue darken-1 waves-effect waves-light">
                    <span>Imágen</span>
                    {{ form.image }}
                  </div>
                  <div class="file-path-wrapper">
                    <input class="file-path validate" type="text">
                  </div>
                </div>
            </div>
            <div class="row">
                {{ form.crop_from.errors }}
                <div class="input-field col s12">
                    {{ form.crop_from }}
                    <label>{% trans "crop from" %}</label>
                </div>
            </div>
            <div class="row">
                {{ form.effect.errors }}
                <div class="input-field col s12">
                    {{ form.effect }}
                    <label>{% trans "photo effects" %}</label>
                </div>
            </div>
            <div class="row">
                {{ form.title.errors }}
                <div class="input-field col s12">
                    <i class="material-icons prefix">title</i>
                    {{ form.title }}
                    <label for="id_title">{% trans "title" %}</label>
                </div>
            </div>
            <div class="row">
                {{ form.caption.errors }}
                <div class="input-field col s12">
                    <i class="material-icons prefix">closed_caption</i>
                    {{ form.caption }}
                    <label for="id_caption">{% trans "caption" %}</label>
                </div>
            </div>
            <div class="row">
                {{ form.tags.errors }}
                <div class="input-field col s12">
                    <i class="material-icons prefix">label</i>
                    {{ form.tags }}
                    <label for="id_caption">{{ form.tags.help_text }}</label>
                </div>
            </div>
            <div class="row">
                <button class="waves-effect waves-light btn blue darken-1 right" type="submit" >Subir
                <i class="material-icons right">file_upload</i>
                </button>
            </div>
        </form>
    </div>
    <!-- PRUEBAS -->
    <form method="post" action="{% url "photologue:upload-zip" %}" accept-charset="utf-8" enctype="multipart/form-data">{% csrf_token %}
        {{ form_zip.as_p }}
    <input type="submit" value="Send message" />
    </form>
    <!-- END PRUEBAS -->
</div> <!-- end wrapper -->
    <script async src="{{STATIC_URL}}js/photo_gallery.js" type="text/javascript"></script>
{% endblock %}
