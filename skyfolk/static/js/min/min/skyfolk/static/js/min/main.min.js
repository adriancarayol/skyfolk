!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,
this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){this.$container=b,this.$avatarModal=this.$container,this.$loading=this.$container.find(".loading"),this.$avatarForm=this.$avatarModal.find(".avatar-form"),this.$avatarUpload=this.$avatarForm.find(".avatar-upload"),this.$avatarSrc=this.$avatarForm.find(".avatar-src"),this.$isCutted=this.$avatarForm.find(".is-cutted"),this.$avatarData=this.$avatarForm.find(".avatar-data"),this.$avatarInput=this.$avatarForm.find(".avatar-input"),this.$avatarURL=this.$avatarForm.find("#id_url_image"),this.$avatarSave=this.$avatarForm.find(".avatar-save"),this.$avatarBtns=a("#crop-image-preview").find(".avatar-btns"),this.$avatarWrapper=this.$avatarModal.find(".avatar-wrapper"),this.$avatarPreview=this.$avatarModal.find(".avatar-preview"),this.init()}var c=window.console||{log:function(){}};b.prototype={constructor:b,support:{fileList:!!a('<input type="file">').prop("files"),blobURLs:!!window.URL&&URL.createObjectURL,formData:!!window.FormData},init:function(){this.support.datauri=this.support.fileList&&this.support.blobURLs,this.support.formData||this.initIframe(),this.initModal(),this.addListener()},addListener:function(){this.$avatarInput.on("change",a.proxy(this.change,this)),this.$avatarForm.on("submit",a.proxy(this.submit,this)),this.$avatarBtns.on("click",a.proxy(this.rotate,this))},initModal:function(){},initPreview:function(){var a=this.$avatar.attr("src");this.$avatarPreview.html('<img src="'+a+'">')},initIframe:function(){var b="upload-iframe-"+(new Date).getTime(),d=a("<iframe>").attr({name:b,src:""}),e=this;d.one("load",function(){d.on("load",function(){var b;try{b=a(this).contents().find("body").text()}catch(a){c.log(a.message)}if(b){try{b=a.parseJSON(b)}catch(a){c.log(a.message)}e.submitDone(b)}else e.submitFail("Image upload failed!");e.submitEnd()})}),this.$iframe=d,this.$avatarForm.attr("target",b).after(d.hide())},click:function(){this.initPreview()},change:function(){var a,b;this.support.datauri?(a=this.$avatarInput.prop("files"),a.length>0&&(b=a[0],this.isImageFile(b)&&(this.url&&URL.revokeObjectURL(this.url),this.url=URL.createObjectURL(b),this.startCropper()))):(b=this.$avatarInput.val(),this.isImageFile(b)&&this.syncUpload())},submit:function(){return!!(this.$avatarSrc.val()||this.$avatarInput.val()||this.$avatarURL.val())&&(this.support.formData?(this.ajaxUpload(),!1):void 0)},rotate:function(b){var c;this.active&&(c=a(b.target).data(),c.method&&this.$img.cropper(c.method,c.option))},isImageFile:function(a){return a.type?/^image\/\w+$/.test(a.type):/\.(jpg|jpeg|png|gif)$/.test(a)},startCropper:function(){var b=this;this.active?this.$img.cropper("replace",this.url):(this.$img=a('<img src="'+this.url+'">'),this.$avatarWrapper.empty().html(this.$img),this.$img.cropper({aspectRatio:1,preview:this.$avatarPreview.selector,crop:function(a){var c=['{"x":'+a.x,'"y":'+a.y,'"height":'+a.height,'"width":'+a.width,'"rotate":'+a.rotate+"}"].join();b.$avatarData.val(c)}}),this.active=!0),this.$avatarModal.one("hidden.bs.modal",function(){b.$avatarPreview.empty(),b.stopCropper()})},stopCropper:function(){this.active&&(this.$img.cropper("destroy"),this.$img.remove(),this.active=!1)},ajaxUpload:function(){var b=this.$avatarForm.attr("action"),c=new FormData(this.$avatarForm[0]),d=this;a.ajax(b,{type:"post",data:c,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){d.submitStart()},success:function(a){d.submitDone(a)},error:function(a,b,c){d.submitFail(b||c)},complete:function(){d.submitEnd()}})},syncUpload:function(){this.$avatarSave.click()},submitStart:function(){this.$loading.fadeIn()},submitDone:function(b){var c=b.data;a.isPlainObject(c)&&200==c.state?b.result?(this.url=b.result,this.support.datauri||this.uploaded?(this.uploaded=!1,this.cropDone()):(this.uploaded=!0,this.$avatarSrc.val(this.url),this.startCropper()),this.$avatarInput.val("")):c.message&&window.location.replace(c.gallery):swal("Failed to response")},submitFail:function(a){swal(a)},submitEnd:function(){this.$loading.fadeOut()},cropDone:function(){this.$avatarForm.get(0).reset(),this.$avatar.attr("src",this.url),this.stopCropper()}},a(function(){return new b(a("#crop-avatar"))})});