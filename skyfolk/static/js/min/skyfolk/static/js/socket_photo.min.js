var UTILS=UTILS||function(){var a={};return{init:function(b){a=b},conn_socket:function(){var b="https:"==window.location.protocol?"wss":"ws",c=b+"://"+window.location.host+window.location.pathname+"stream/";console.log("Connecting to "+c);var d=new ReconnectingWebSocket(c);d.onmessage=function(b){console.log("Got message "+b.data);var c=JSON.parse(b.data);if("pub"===c.type){var d="";d+='  <div class="wrapper" id="pub-'+c.id+'" data-id="'+a+'">',d+='            <div class="box">',d+='            <span id="check-'+c.id+'" class="zoom-pub"><i class="fa fa-expand fa-lg"></i></span>',d+="            <!-- Check para ampliar el mensaje... -->",d+='                  <div class="ampliado" id="expand-'+c.id+'">',d+='                      <div class="cerrar_ampliado"><i class="fa fa-close"></i></div>',d+='                      <div class="nombre_image">',d+="                    <ul>",d+='                      <li><i class="first">'+c.author_first_name+" "+c.author_last_name+"</i></li>",d+='                      <li><a class="name" href="/profile/'+c.author_username+'">'+c.author_username+"</a></li>",d+="                    </ul>",d+='                    <div class="usr-img img-responsive"><img src="'+c.avatar_path+'" alt="'+c.author_username+'" width="120" height="120"></div>',d+="                      </div>",d+='                    <div class="parrafo comment-tab">',d+='                     <a href="/profile/{{ pub.author.username }}">{{pub.author.username}}</a>',d+='                        <a target="_blank">'+c.created+"</a><br><br>",d+=c.content,d+="                    </div>",d+='                      <div class="wrapper-reply">',d+="                        <!-- RESPUESTAS A COMENTARIOS -->",d+='                        <div class="comment-reply">',d+='                        <div class="avatar-reply"><img src="'+c.avatar_path+'" alt="'+c.author_username+'" width="120" height="120"></div>',d+='                            <div class="author-reply"><span class="triangle"> </span><a href="/profile/'+c.author_username+'">'+c.author_username+"</a></div>",d+='                              <div class="content-reply">'+c.content+"</div>",d+="                        </div>",d+="                    </div>",d+="                  </div>",d+='      <div class="image">',d+='        <div class="usr-img img-responsive"><img src="'+c.avatar_path+'" alt="'+c.author_username+'" width="120" height="120"></div>',d+="      </div>",d+="</div>",d+="",d+='                <div class="articulo">',d+='                  <h2 class="h22"><a href="/profile/'+c.author_username+'" >'+c.author_username+"</a> ha comentado:  </h2>",d+='                  <div class="parrafo comment">',d+='                    <a target="_blank">'+c.created+"</a><br>",d+='                      <div class="wrp-comment">'+c.content+"</div>",d+="                  </div>",d+='                    <div class="show-more" id="show-comment-'+c.id+'">',d+='                        <a href="#">+ Mostrar más</a>',d+="                    </div>",d+="              <!-- OPCIONES DE COMENTARIOS -->",d+='                <div class="options_comentarios" id="options-comments">',d+='                    <ul class="opciones">',d+="        ",d+='                             <li class="trash-comment" title="Borrar comentario"><i class="fa fa-trash"></i></li>',d+='                            <li title="No me gusta" class="fa-stack hate-with-values" id="fa-hate">',d+='                                <span class="hate-comment">',d+='                                    <i class="fa fa-heart fa-stack-1x"></i>',d+='                                    <i class="fa fa-bolt fa-stack-1x fa-inverse"></i>',d+='                                    <i class="fa hate-value"> </i>',d+="                                </span>",d+="                            </li>",d+='                        <li title="¡Me gusta!" class="like-comment"><i id="like-heart" class="fa fa-heart"> </i></li>',d+='                       <li title="Citar" class="quote-comment"><i class="fa fa-quote-left">',d+="                       </i></li>",d+='                       <li title="Responder" class="reply-comment"><i class="fa fa-reply" id="reply-caja-comentario-'+c.id+'"></i></li>',d+='                       <li title="Añadir a mi timeline" class="add-timeline"><i class="fa fa-tag"> </i></li>',d+="                    </ul>",d+="                </div>",d+="                </div>",d+="    </div>";var e=$("#pub-"+c.id),f=$("#without-comments"),g=c.content.replace(/\s\s+/g," ");e.length?e.html(d):$("#messages-wrapper").prepend(d);var h=$("div#pub-"+c.id).find("#show-comment-"+c.id);$(f).is(":visible")&&$(f).fadeOut(),g.length<90&&$(h).css("display","none")}else{var d="";d+='                <div class="wrapper-reply">',d+="",d+="                <!-- RESPUESTAS A COMENTARIOS -->",d+="",d+='                <div class="comment-reply">',d+='                <div class="avatar-reply"><img src="'+c.avatar_path+'" alt="'+c.author_username+'" width="120" height="120"></div>',d+='                    <div class="author-reply">',d+='                      <a href="/profile/'+c.author_username+'">'+c.author_username+"</a>",d+='                      <i class="reply-created">'+c.created+"</i>",d+="                    </div>",d+='                      <div class="content-reply">'+c.content+"</div>",d+="                </div>",d+="",d+="                </div>",d+="    </div>";var i=$("#pub-"+c.parent);$(i).append(d)}},d.readyState==WebSocket.OPEN&&d.onopen(),d.onclose=function(){console.log("No connected.")}}}}();