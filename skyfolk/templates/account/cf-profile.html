{% extends "account/base_cf.html" %}
{% comment %}
	Template para la configuracion del perfil de usuario
{% endcomment %}
{% block additional_files %}
{% load i18n avatar_tags %}
{% endblock%}
{% block cf-title %}
<hgroup>
	<h4 class="cn"> Perfil </h4>
	<h6 class="ch"> Cambia datos de tu perfil</h6>
</hgroup>
{% endblock %}
{% block cf-form %}
	<form id='formulario' method='post' enctype='multipart/form-data' action=''>{% csrf_token %}
	<div class="col-lg-12 col-md-12 col-sm-12 wrapper-profilex">
		{% if user_profile.profile.backImage %}
			<div class="col-lg-12 col-md-12 col-sm-12 profilex" style="background: url('{{user_profile.profile.backImage.url}}') no-repeat center center; background-size: cover;">
		{% else %}
			<div class="col-lg-12 col-md-12 col-sm-12 profilex" style="background: url('{{STATIC_URL}}img/nuevo_back.png') no-repeat center center; background-size: cover;">
		{% endif %}
		<!-- Si el usuario tiene imagen, lo redireccionamos a change -->
		<div data-title="Imágen de perfil" class="img-profile">
			{% if request.user|has_avatar %}
			<a href="{% url 'avatar_change' %}">
			{% else %} {% comment %} Si no, le proponemos añadir una nueva imagen {% endcomment %}
			<a href="{% url 'avatar_add' %}">
			{% endif %}
			{% avatar user %}
			</a>
    	<a title="Eliminar imágenes de perfil" href="{% url 'avatar_delete' %}" class="delete-profile-image"><i class="fa fa-trash"></i></a>
        <a title="Subir imágenes de perfil" href="{% url 'avatar_add' %}" class="add-profile-image"><i class="fa fa-plus"></i></a>
		</div>
		</div>
		<div class="index-wrapper">
				<div class="nameConfig">
				<p>{{ user_form.first_name.errors}}</p>
				<p>¿Como te llamas?</p>
				<p>{{ user_form.first_name }}</p>
			</div>
				<div class="lastConfig">
				<p>{{ user_form.last_name.errors }}</p>
				<p>¿Y tu apellido?</p>
				<p>{{ user_form.last_name }}</p>
			</div>
				<div class="backimage-usr">
					<p>{{ perfil_form.backImage.errors }}</p>
					<p>Elige una imagen de fondo.</p>
					<p>{{ perfil_form.backImage }}</p>
				</div>
				<div class="status-usr">
					<p>{{ perfil_form.status.errors }}</p>
					<p>Introduce un estado ;-).</p>
					<p>{{ perfil_form.status }}</p>
				</div>
				<div class="menu-usr">
					<p>{{ perfil_form.hiddenMenu.errors }}</p>
					<p>Menu estático</p>
					<p>{{ perfil_form.hiddenMenu }}</p>
				</div>
		</div>
			</div>
				<button class="btn btn-info" id="boton-perfil" type="submit">Salvar cambios</button>
		</div>
	</form>
	{% comment %}
		Para evitar cadenas de texto muy largas (a la hora de mostrar el nombre del fichero)
	{% endcomment %}
	<script async>
		jQuery("a").each(function(i, value) {
	   var hyperlink = jQuery(value);
	   var text = hyperlink.text();

	   if(text.length > 25) {
	      hyperlink.text(text.substring(0, 21) + "...");
	   }
	});
	</script>
{% endblock %}
