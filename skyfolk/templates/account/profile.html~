{% extends "account/base_interface.html" %}
{% load app_filters %}
{% block include_files %}
<!-- Mostrar objetos al hacer scroll -->
<script type="text/javascript"> 

	
   //first set the value you will be using.
   var STATIC_URL = "{{STATIC_URL}}"; // and anything else you need to set
   var MEDIA_URL = "{{MEDIA_URL}}";

   var requests = jQuery.parseJSON( '{{json_requestsToMe|safe}}' );
   var stopRequests = false;
   var idRequestsTimer = null;
   
   if(requests){
      idRequestsTimer = setInterval(function(){ if(requests.length > 0){ item = requests.pop();showRequest(item.id_profile, item.username); }else if(idRequestsTimer != null){ clearInterval(idRequestsTimer); } }, 3000);

    }

</script>  

<!-- Cuando clickas en TimeLine se desplaza hacia abajo -->
<script>
function scrollWin() {
    window.scrollBy(0,700);
}

</script>


  {% if liked == True %}

    <style type="text/css">
        #ilike_profile {
            color: #29b203;
        }
    </style>


  {% endif %}

  {% if isFriend == True %}

    <style type="text/css">
        #addfriend {
            color: #29b203;
        }
    </style>
  {% endif %}

{% endblock %}



{% block content %}

<div id="panel" style="display:none;"> 

  <div id="widget" style="display:none;"> 
  
    <div id="middle"></div>
    <div id="linkedin" class="size left"><span class="entypo-users"></span></div>
    <div id="middle"><div class="entypo-user"></div></div>

    <div id="linkedin" class="size left"><a href="/friends"><span class="entypo-users"></span></a></div>
    <div id="dribbble" class="size right"><span class="entypo-mail"></span></div>
    <div id="facebook" class="size left"><a href="/newsevent"><span class="entypo-calendar"></span></div></a>
    <div id="twitter" class="size right"><a href="{% url 'account_logout' %}"><span class="entypo-logout"></span></div></a>

  </div>
</div>
{% if user_profile.profile.image %}
      <nav class="profile" style="background-image: url('{{user_profile.profile.image.url}}');">
      <li class="fa fa-envelope fa-2x" id="publish2"></li>
      <li class="fa fa-home fa-2x" onclick="javascript:location.href='/'"></li>
      <li class="fa fa-users fa-2x" onclick="javascript:location.href='/friends'"></li>
      <li class="fa fa-sign-out fa-2x" onclick="javascript:location.href='{% url 'account_logout' %}'"></li>
    </nav>
{% else %}
      <nav class="profile" style="background-image: url('{{STATIC_URL}}img/generic-avatar.png');">
      <li class="fa fa-envelope fa-2x" id="publish2"></li>
      <li class="fa fa-home fa-2x" onclick="javascript:location.href='/'"></li>
      <li class="fa fa-users fa-2x" onclick="javascript:location.href='/friends'"></li>
      <li class="fa fa-sign-out fa-2x" onclick="javascript:location.href='{% url 'account_logout' %}'"></li>
    </nav>
{% endif %}

<!--
 <div class="Mensaje" id="js-timer">
  <div class="Mensaje-icon">
    <i class="fa fa-bell-o"></i>
  </div>
  <div class="Mensaje-body">
    <p>¡Bienvenido, {{ user_profile.username }}</p>
    <p class="u-italic">Acabas de entrar a Skyfolk satisfactoriamente.</p>
  </div>
  <button class="Mensaje-close js-messageClose"><i class="fa fa-times"></i></button>
</div>
-->
<!-- Configuración rápida -->
<!--
      <div id="confr" class="col-xs-6 col-md-4">
        <span class="fontawesome-cog">  Configuración rápida.</span>
        <span class="fontawesome-remove"></span>
        <img src="http://data2.whicdn.com/images/18501113/large.jpg" class="img-rounded"></img>
    <form role="form">
  <div class="form-group">
    <label for="exampleInputEmail1"><p>Nombre de usuario</p></label>
    <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter new name.">
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1"><p>Estado</p></label>
    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Play Hard">
  </div>
       <div class="form-group">
    <label for="exampleInputPassword1"><p>Localizacion</p></label>
    <input type="text" class="form-control" id="exampleInputPassword1" placeholder="Murcia (España)">
  </div>
       <div class="form-group">
    <label for="exampleInputPassword1"><p>Web</p></label>
    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="skyfolk.com">
  </div>

      <button type="button" class="btn btn-primary">Save Changes</button>
      </form>
      <div class="nav">  <nav>
    <ul>
      <li title="Recursos" class="fontawesome-cloud"></li>
      <li title="Mis Trabajos" class="fontawesome-wrench"></li>
      <a href="index.html"><li title="Inicio" class="fontawesome-dashboard"></li></a>
      <li title="Aportaciones" class="fontawesome-copy"></li>
      <a href="novedades.html"><li title="Páginas de interés" class="fontawesome-globe"></li></a>
    </ul>
      </nav>
      </div>
      </div>-->
<!-- Fin de conf rápida -->
<!-- Notificacion me gusta -->
<!---
<div id="notifi">
<div class="love">
  <h4> Has recibido un <a>Me gusta.</a> </h4>
  <a class="fontawesome-remove"></a>
  <span><i class="fontawesome-heart"></i><p><a href="#">Homer Simpson</a> le gusta un mensaje tuyo.</p></span>
</div>
</div>
-->
<!-- Fin notificacion me gusta -->
<div class="container">

  
  <div class="col-lg-8 col-md-6 col-sm-12">
<!-- Contenedor principal, engloba el tablon, widgets... [IMPORTANTE]-->
    <div class="container">
 
      <div class="col-lg-6 col-md-12 col-sm-12">
        <div class="user-card card">
          <span class="fontawesome-bookmark" onclick="scrollWin()"> Timeline</span>
            
         
          <div class="user-avatar"><img src="{{STATIC_URL}}img/1.jpg" class="user-bg"><span class="fa fa-paw fa-lg" title="Acerca de {{ user_profile.username }}"> </span>
            <!--<input type="checkbox" id="button-menu"  />-->
            {% if user.is_authenticated and user.username != user_profile.username and existFriendRequest == True %}  <!-- si es usuario esta visitando un perfil que no es el suyo -->
              <img id = "friend_request_progress" src="{{STATIC_URL}}img/friend_request_progress.png">
            {% endif %}
            <div class="caja">
             <div class="item">
                
				{% if user_profile.profile.image and user_profile.profile.image|file_exists %}
				   <img src="{{user_profile.profile.image.url}}" class="user-pic">
				{% else %}
				   <img src="{{STATIC_URL}}img/generic-avatar.png" class="user-pic">
				{% endif %}
               
               <!--  <img src="{{STATIC_URL}}img/bola/2.jpg" class="user-pic">-->

               <span class="informacion">
                {% if user.is_authenticated and user.username == user_profile.username %} <!-- Si el usuario esta visitando su propio perfil -->
                   <span id="addfriend" class="entypo-plus" title="Agregar" onclick=AJAX_requestfriend('abort')></span>
                   <span id="ilike_profile" class="entypo-thumbs-up" title="¡Me gusta!" onclick=AJAX_likeprofile('abort')></span>
                   <span id="publish" class="entypo-forward" title="Escribir"></span>             
                {% elif not user.is_authenticated %} <!-- si es usuario anonimo -->
                   <span id="addfriend" class="entypo-plus" title="Agregar" onclick=AJAX_requestfriend('anonymous')></span>
                   <span id="ilike_profile" class="entypo-thumbs-up" title="¡Me gusta!" onclick=AJAX_likeprofile('anonymous')></span>
                   <span id="publish" class="entypo-forward" title="Escribir"></span>    
                {% else %} <!-- si es usuario esta visitando un perfil que no es el suyo -->
                   <span id="addfriend" class="entypo-plus" title="Agregar" onclick=AJAX_requestfriend('noabort')></span>
                   <span id="ilike_profile" class="entypo-thumbs-up" title="¡Me gusta!" onclick=AJAX_likeprofile('noabort')></span>
                   <span id="publish" class="entypo-forward" title="Escribir"></span>

                {% endif %}
               </span>
              </div>
            </div>
          </div>
    
 
          <header>
            <!--
            <h1>Adrian Subname</h1>
            <p>_Adrianxxxxxxx</p>
            -->
            <!--
            <h1>{{ user.first_name }} {{ user.last_name }}</h1>
            <p>{{ user.username }}</p>
            -->
            <!--
            <h1>{{ userProfile.first_name }} {{ userProfile.last_name }}</h1>
            <p>{{ userProfile.username }}</p>
            -->
            <!--<h1>{{ userProfile.first_name }} {{ userProfile.last_name }}</h1>-->
            <p>{{ user_profile.username }}</p><p id="profileId" hidden>{{ user_profile.profile.id }}</p>

          </header>
          <div class="status">Play hard.</div>
          <ul class="stats">
            <li><a href="/friends"><strong>380</strong><span>Seguidores</span></a></li>
            <li><a id="likes"><strong>{{n_likes}}</strong><span value="me gusta" onclick="contador()">Me gusta</span></a></li>
            <li><a class='inline' href="#inline_content"><strong>48</strong><span>Fotos</span></a></li>
          </ul>
        </div>
      </div>
  
      <div class="col-lg-6 col-md-12 col-sm-12">
        <div class="stock card">
          <div class="stock-chart">
            <div id="chart"></div>
          </div>
          <div class="current-price container">
            <div class="info col-lg-6"><abbr>AAPL</abbr>
              <time>Yesterday, 15:04 pm</time>
            </div>
            <div class="changes col-lg-6">
              <div class="value up">694.00</div>
              <div class="change">+4.95 (3.49%)</div>
            </div>
          </div>
  
          <div class="yearly-changes container">
            <div class="year-all col-lg-6"><strong>+105.32</strong><span>Yearly change</span></div>
            <div class="year-chart col-lg-6">
              <ul class="chart-bars">
                <li data-value="35" data-title="January">
                  <div class="value"></div>
                  <label>J</label>
                </li>
                <li data-value="35" data-title="February">
                  <div class="value"></div>
                  <label>F</label>
                </li>
                <li data-value="35" data-title="March">
                  <div class="value"></div>
                  <label>M</label>
                </li>
                <li data-value="35" data-title="April">
                  <div class="value"></div>
                  <label>A</label>
                </li>
                <li data-value="35" data-title="May">
                  <div class="value"></div>
                  <label>M</label>
                </li>
                <li data-value="35" data-title="June">
                  <div class="value"></div>
                  <label>J</label>
                </li>
                <li data-value="35" data-title="July">
                  <div class="value"></div>
                  <label>J</label>
                </li>
                <li data-value="35" data-title="August">
                  <div class="value"></div>
                  <label>A</label>
                </li>
                <li data-value="35" data-title="September">
                  <div class="value"></div>
                  <label>S</label>
                </li>
                <li data-value="35" data-title="October">
                  <div class="value"></div>
                  <label>O</label>
                </li>
                <li data-value="35" data-title="November">
                  <div class="value"></div>
                  <label>N</label>
                </li>
                <li data-value="35" data-title="December">
                  <div class="value"></div>
                  <label>D</label>
                </li>
              </ul>
            </div>
          </div>
          <div class="summary container">
            <div class="col-lg-6 mobile-grid-50"><a><strong>18.3 M</strong><span>Shares traded</span></a></div>
            <div class="col-lg-6 mobile-grid-50"><a><strong>13.45 B</strong><span>Market cap</span></a></div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="video-player card">
        <div class="vbox">
          <div class="thumbnail"></div>
          <button class="play-btn"><span class="fontawesome-play"></span></button>
        </div>
        <ul class="unstyled controls table">
          <li class="play">
            <button><span class="fontawesome-play"></span></button>
          </li>
          <li class="timeline">
            <div class="progress-bar">
              <div class="bar">
                <div class="progress">
                  <div class="value"></div>
                </div>
              </div>
            </div>
          </li>
          <li class="volume-ctl">
            <ul class="unstyled table">
              <li class="volume-btn">
                <button><span class="fontawesome-volume-up"></span></button>
              </li>
              <li class="volume-bar">
                <div class="progress-bar">
                  <div class="bar">
                    <div class="value"></div>
                  </div>
                </div>
              </li>
            </ul>
          </li>
          <li class="fullscreen">
            <button><span class="fontawesome-desktop"></span></button>
          </li>
        </ul>
      </div>
      <!--
      <div class="location card">
        <div class="map"></div>
        <div class="decription container">
          <div class="col-lg-9">
            <div class="loc"> <span class="fontawesome-home"> </span>Tu localizacion</div>
            <div class="city">Murcia, Espa&Ntildea</div>
          </div>
          <div class="col-lg-3"><a class="photos">Mirar fotos</a></div>
        </div>
      </div>
-->
     <div class="messages">
      <div id="section">
        <div class="wrapper">
      {% for item in publications_top15 %}
           <div class="line">
                <li>
                <div data-sr="wait 0.2s then scale up 30%" class="second">
                {% if user_profile.profile.image %}
                  <span class="acontecimiento" style="background-image: url('{{user_profile.profile.image.url}}');"></span>
                  {% else %}
                   <span class="acontecimiento" style="background-image: url('{{STATIC_URL}}img/generic-avatar.png');"></span>
                   {% endif %}
                    <span class="head"><a>{{user_profile.username}}  <a class="fecha_" target="_blank">{{item.from_publication__created}}</a></a><em></em></span>
                    <div id="p" class="parrafo comment">
                     {{item.from_publication__content}}
                     </div>
                  <div class="contenidoadicional">
                    <!--<img src="http://archive.eusa.eu/files/News/2012/photoc-camera_w2.jpg" title="random_photo" alt="random_photo">-->
                  </div>
                  <div class="controles">
                    <ul>
                      <li class="fa fa-heart fa-2x"></li>
                      <li class="fa fa-share fa-2x"></li>
                      <li class="fa fa-reply fa-2x"></li>
                    </ul>
                  </div>
                  </div>
                </li>
    </div>
      {% endfor %}
  </div>
</div>
      </div>
    </div>
  </div>

  <div class="col-lg-4 col-md-6 col-sm-12">
    <div class="container">
      <div class="col-lg-12">
      <div id="div-separator">
        <div class="sidebar card" id="tab-container">
          <ul class="unstyled table fullwidth links">
            <li class="tab" id="li-tab-popular"><a href="#tab-popular">Popular</a></li>
            <li class="tab" id="li-tab-comentarios"><a href="#tab-comentarios">Comentarios</a></li>
            <li class="tab" id="li-tab-amigos"><a href="#tab-amigos">Amigos</a></li>
          </ul>
          <div class="unstyled content" id="hood-tabs">
				<div id="tab-popular">
	
	
	         	</div>
				<div id="tab-comentarios">


					{% for item in publications_top15 %}		      
						<div class="wrapper" id="pub-{{item.from_publication__id}}">
            <div class="box">
            <input type="checkbox" id="{{item.from_publication__id}}">
            <label for="{{item.from_publication__id}}" class="zoom-pub"><i class="fa fa-expand fa-lg"></i></label>
            <!-- Check para ampliar el mensaje... -->
                  <div class="ampliado">
                      <div class="nombre_image">
                      <ul>
                      <li><i class="first">{{item.user__first_name}} {{item.user__last_name}}</i></li>
                      <li><a class="name" href="/profile/{{ item.user__username }}" >{{item.user__username}}</a></li>
                    {% if item.user__profile__image and item.user__profile__image|file_exists %}
                    </ul>
                     <img src="{{MEDIA_URL}}{{item.user__profile__image}}" alt="img" class="usr-img img-responsive"><!-- id es avatar-publication-->
                  {% else %}
                     <img src="{{STATIC_URL}}img/generic-avatar.png"  alt="img" class="usr-img img-responsive"> <!-- id es avatar-publication-->
                  {% endif %}
                      </div>
                    <div class="parrafo comment">
                    <a target="_blank">{{item.from_publication__created}}</a><br><br>{{item.from_publication__content}}
                  </div>
                  <div class="text_area">
                      <textarea placeholder="Escribe tu mensaje..."></textarea>
                        <ul>
                        <li><i class="fa fa-heart fa-lg"></i></li>
                        <li><i class="fa fa-reply fa-lg"></i></li>
                        <li><i class="fa fa-star fa-lg"></i></li>
                        </ul>
                  </div>
                  </div>

							        <label class="image" for="profile">
									{% if item.user__profile__image and item.user__profile__image|file_exists %}
									   <img src="{{MEDIA_URL}}{{item.user__profile__image}}" alt="img" class="usr-img img-responsive"><!-- id es avatar-publication-->
									{% else %}
									   <img src="{{STATIC_URL}}img/generic-avatar.png"  alt="img" class="usr-img img-responsive"> <!-- id es avatar-publication-->
									{% endif %}
							        <!--  <img id="avatar-publication" src="{{STATIC_URL}}img/generic-avatar.png" alt="img" class="img-responsive">-->
							        </label>
</div>
</input>
							  <article class="articulo">
							    <h2 class="h22"><a href="/profile/{{ item.user__username }}" >{{item.user__username}}</a> mentioned you</h2>
							    <div class="parrafo comment">
							      <a target="_blank">{{item.from_publication__created}}</a><br>{{item.from_publication__content}}
							    </div>
              <!-- OPCIONES DE COMENTARIOS -->
                <div class="optiones_comentarios">
                    <ul class="opciones">
                       <li><i class="fa fa-heart"></i></li>
                       <li><i class="fa fa-quote-left"></i></li>
                       <li><i class="fa fa-reply"></i></li>
                       <li><i class="fa fa-tag"></i></li>
                    </ul>
                </div>

							  </article>
					  	</div>
					
					{% endfor %}
					
				
					
				</div>
				<div id="tab-amigos">
				
					  <ul class="list-friends">

					      {% for item in friends_top12 %}
					      			<!--<li><img src="{{STATIC_URL}}img/generic-avatar.png" class="img-responsive"><a href="/profile/{{ item.user__username }}">{{item.user__first_name}} {{item.user__last_name}} ({{item.user__username}})</a></li>-->
									<li id="friend-{{item.user__id}}">
									{% if item.user__profile__image and item.user__profile__image|file_exists %}
									   <img src="{{MEDIA_URL}}{{item.user__profile__image}}" class="usr-img img-responsive">
									{% else %}
									   <img src="{{STATIC_URL}}img/generic-avatar.png" class="usr-img img-responsive">
									{% endif %}
									<a href="/profile/{{ item.user__username }}">{{item.user__first_name}} {{item.user__last_name}} ({{item.user__username}})</a>
									</li>
					      {% endfor %}
					      
					  </ul>
					
				</div>
          </div>
      </div>
      </div>
      </div>
      </div>
      
 
      <div class="col-lg-12">
        <div class="weather card">
          <div class="current">
            <div class="icon"><span class="fontawesome-cloud"></span></div>
            <div class="temperature">30&deg;</div>
          </div>
          <div class="container info">
            <div class="col-lg-10">
              <div class="city">Los Angeles</div>
              <div class="container indicators">
                <div class="col-lg-6 precipitation"><span class="fontawesome-tint"></span>13%</div>
                <div class="col-lg-6 wind"><span class="fontawesome-leaf"></span>15<small>Mph</small></div>
              </div>
            </div>
            <div class="col-lg-2">
              <button class="refresh"><span class="fontawesome-refresh"></span></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<!--</div>-->


<!-- This contains the hidden content for inline calls -->
<div style='display:none'>
      <div id='inline_content' style='padding:10px; background:#fff;'>
        <section>
  <fieldset class="controls">
  <ul class="btn">
    <li><button class="all">Todas</button></li>
    <li><select>
      <option value"choose" selected="selected">Choose...</option>
      <option value="rec">Recientes</option>
      <option value="+">Mas Likes</option>
      <option value="+m">Mas comentadas</option></select></li>
    <li><select>
      <option value"choose" selected="selected">Year...</option>
      <option value="rec">2015</option>
      <option value="+">2016</option>
      <option value="+m">2017</option></select></li>
  </ul>
  <ul class="layout">
    <li><button class="fontawesome-reorder"></button></li>
    <li><button class="fontawesome-table"></button></li>
</ul>
  <ul>
    </fieldset>
    <li><div class="photo">
      <span class="text">
        <p href="#">Vacaciones en Tenerife.</p>
        <i class="fontawesome-heart"> 1.031</i>
        <a class="fontawesome-comment"> 432</a>
      </span><img src="http://media1.onsugar.com/files/2014/04/09/296/n/28443503/addcb937ebb4186e_shutterstock_124808911.xxxlarge/i/Best-Ways-Stick-Your-Diet.jpg" alt="Photo">
   </div></li>
  <li><div class="photo"><span class="text">
        <p>Vacaciones en Tenerife.</p>
        <i class="fontawesome-heart"> 1.031</i>
        <a class="fontawesome-comment"> 432</a>
      </span></span><img src="http://www.anvari.org/db/cols/Best_Journalism_Photos/Best_Photo_6.jpg" alt"Photo"></div></li>
    <li><div class="photo"><span class="text">
        <p href="#">Vacaciones en Tenerife.</p>
        <i class="fontawesome-heart"> 1.031</i>
        <a class="fontawesome-comment"> 432</a>
      </span><img src="http://www.anvari.org/db/cols/Best_Journalism_Photos/Best_Photo_6.jpg" alt"Photo"></div></li>
    <li><div class="photo"><span class="text">
        <p href="#">Vacaciones en Tenerife.</p>
        <i class="fontawesome-heart"> 1.031</i>
        <a class="fontawesome-comment"> 432</a>
      </span><img src="http://www.anvari.org/db/cols/Best_Journalism_Photos/Best_Photo_6.jpg" alt"Photo"></div></li>
    <li><div class="photo"><span class="text">
        <p href="#">Vacaciones en Tenerife.</p>
        <i class="fontawesome-heart"> 1.031</i>
        <a class="fontawesome-comment"> 432</a>
      </span><img src="http://www.wellhappypeaceful.com/wp-content/uploads/2011/12/Dog-Cat-Best-Friend.jpg" alt"Photo"></div></li>
  </ul>
</section>
      
      </div>
</div>

<!-- Mensaje flotante -->
<!--  
<div id="page-wrapper" style="display:none;">
  <h1></h1>
  
  <div id="status">Conectando...</div>
  
  
  <form id="message-form2" action="#" method="post">
    <textarea id="message2" placeholder="Escribe tu mensaje aquí..." required></textarea>
    <button type="submit">Enviar</button>
    <button type="close" id="close">Cerrar</button>
    <button class="fontawesome-bullhorn"></button>
    <button class="fontawesome-camera"></button>
    <button class="fontawesome-map-marker"></button>
   
    
  </form>
</div>
-->

{% if user.is_authenticated %}
	<div id="page-wrapper" style="display:none;">
	  	<h1></h1>
		<div id="status">to {{ user_profile.username }}</div>
		<form id="message-form2" action="" method="post">{% csrf_token %}
	
			{{publicationForm.as_p}}
			<input type="text" name="userprofileid" value="{{ user_profile.pk }}" hidden>
			<input type="text" name="emitterid" value="{{ user.pk }}" hidden>
		    <button type="submit" id="sendformpubli"><i class="fa fa-paper-plane"></i> Enviar</button>
		    <!--  <input type="submit" id="sendformpubli" value="Submit Feedback" /> -->
		    <button type="button" id="close"><i class="fa fa-remove"></i> Cerrar</button>
		    <button class="fontawesome-bullhorn"></button>
		    <button class="fontawesome-camera"></button>
		    <button class="fontawesome-map-marker"></button>
	                  
		</form>
	</div>
{% endif %}

<!-- ALERTS BOOTSTRAP (NO USAR TODAVIA) -->
<div id="friend-success" class="alert alert-success alert-dismissible" role="alert" hidden><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>You have added a friend!</div>
<div id="publish-success" class="alert alert-success alert-dismissible" role="alert" hidden><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>You have successfully posted!</div>








</div>

</body>
<!-- IGNORAR, SOLO MUESTRA OBJETOS AL HACER SCROLL -->
    <script>

      window.sr = new scrollReveal(config);

    </script>

     <script>

      var config = {

        easing: 'hustle',
        reset:  true,
        delay:  'onload',
        vFactor: 0.90,
      }

      window.sr = new scrollReveal( config );

    </script>

{% endblock%}





